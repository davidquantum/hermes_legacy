# Check which kind of stacktrace is available
include(CheckIncludeFile)
CHECK_INCLUDE_FILE("link.h" HAVE_TEUCHOS_LINK)
CHECK_INCLUDE_FILE("bfd.h" HAVE_TEUCHOS_BFD)
CHECK_INCLUDE_FILE("execinfo.h" HAVE_EXECINFO)
if (CMAKE_CXX_COMPILER_ID STREQUAL "GNU")
  set(HAVE_CXXABI yes)
endif()
include(CheckFunctionExists)
CHECK_FUNCTION_EXISTS(vasprintf HAVE_VASPRINTF)
CHECK_FUNCTION_EXISTS(strcasecmp HAVE_STRCASECMP)

if (HAVE_EXECINFO AND HAVE_CXXABI AND HAVE_VASPRINTF AND HAVE_TEUCHOS_LINK AND HAVE_TEUCHOS_BFD AND CMAKE_CXX_COMPILER_ID STREQUAL "GNU")
  set(HAVE_TEUCHOS_STACKTRACE yes)
endif()

set(CMAKE_REQUIRED_LIBRARIES m)
CHECK_FUNCTION_EXISTS(fmemopen HAVE_FMEMOPEN)
CHECK_FUNCTION_EXISTS(log2 HAVE_LOG2)
